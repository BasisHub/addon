DataPort Notes

Running DataPort

1) Before beginning
	a. Make sure your data dictionary files from version 6/7 are up-to-date.  Dataport will only port files/fields referenced in the dictionary.
	b. Ensure that you have a target (destination) directory that contains no data files.
	c. Copy/paste the arc, bar, cdf and def subdirectories from the Addon /data folder into your target directory.
	d. Ensure that the source directory has all of the files you want to port. It MUST contain the data dictionary files (ddm) as well.
2) Start up a working version of Addon/Barista.
3) Select the AddonSoftware Administration menu, then Utilities, then DataPort.
4) Select the proper version (6 or 7).
5) Search for or enter the proper Source Directory. The field will remain pink until it finds a directory that has the ddm files in it.
6) Search for or enter the proper Target Directory. The field will remain pink until it finds a valid directory.
7) Once the proper fields have been selected, the Scan button will activate. When clicked, the grid will populate with the source files that may be converted.
8) A Ctrl-A will select all of the files, and then a space bar will select all of the check boxes, or you can click on the checkbox on each file you want to port.
9) Once selected, click on Process. You will be prompted for whether you want to port the selected files. Once you select Yes, the process will begin. 

Notes

1) If during the process, it finds a file already exists in the Target Directory with the same name, it will prompt you with that information and ask if you want to overwrite the file.
2) If during the process, it finds a blank value in a field that is in a primary key, it will display a message at the end of the dataport, and all such fields will be displayed in the error file.
        a. It is HIGHLY recommended that you write code to change the values of these fields to a unique non-blank value. You will have to do a little research in order to determine which of the reported fields to change and what value would be unique. Barista works MUCH better if key fields are not blank.
3) If during the process, it finds an invalid date, it will print a record to the log specifying which file, which field, and what the converted value would have been. It then blanks out the date and writes it to the table.
4) If you have custom files or fields that are being converted from a prior version you must:
	a. Ensure that the old version’s dictionary defines those files/fields.
	b. Ensure that the version 8 dictionary has those fields and files defined.
	c. If the file names between the old version and version 8 differ, you must make an entry in the file named file_xref, found in /apps/aon/util/DataPort/files. Follow the format of the existing records found there.
	d. If there is a new record in sys-01, you will need to make an entry in the file named file_normalization (see 2c above for location). Make sure that the 4 characters of the key immediately following the firm ID is in the first portion of the entry, and the file name in the old dictionary is in the second portion.
	e. For new files, you will need to make an entry in the file named file_alias (see 2c above for location). The first column is the file name plus the record ID from the old file, and the right column is the table name used in version 8.
	f. If the old field name for a new field differs from the version 8 field in a specific file, you must make an entry in the file named field_file_xref (see 2c above for location). The first column is the version 8 file name, the second column is the field name in the "from" version’s dictionary, and the third column is the field name in version 8.
	g. If the old field name for a new field differs from the version 8 field throughout the system, you must make an entry in the file named field_name_xref (see 2c above for location). The first column is the field name from the old version and the second column is the field name in version 8.
	h. If you need to write custom code to deal with customer specific conversion needs, you may write a public with an ENTER statement and no arguments, and an EXIT at the end. All variables used in the DataPort program will then be available to you in that public. In the barista.cfg file, add a line that says SET +CUSTOM_DP_PROG=yourpublic. If that public is available when you run DataPort, it will ADDR that program for efficiency, and make the call after each record has been read from the source directory. Common variables you will want to be aware of are: value$ (holds the data in the field coming in), old_fieldlist.name$[field] (the variable name from the dictionary of the source data), and datafile$ (the source datafile name).
5) The Internal Sequence Number is an Element that is used to link detail lines to detail Lot/Serial lines. If you have custom files that make use of this one to many to many type of structure, you will need to make entries in the internal_seq file. The first field is the file alias, the second column is the name of the (line number) element from the source table, and the third column is the Data Element name in your version 8 table. DataPort will copy the contents of the line number element into the Data Element name in the version 8 table. You will need to do this to both the line number table and to the Lot Serial table to retain the unique link during the upgrade.
6) If a DOM is encountered when writing to a destination file, it will write information about that duplication in the error file and display a warning at the end of the dataport run. The duplicate record will not be written.
7) If Drop Ship information is encountered in either the Purchase Requisition detail file or the Purchase Order detail file, it will write the information to the error file. This information has been moved to the header file. You will need to run the Post DataPort program that converts Drop Ship information.
	
After the Dataport process is complete

1) Copy/paste the files listed below from a standard set of demo data to the target/destination directory, replacing any files that already exist.
	a. adm-09
	b. adm-19
	c. glm-06
	d. glm-18
	e. glw-11
	f. adm_rptctl
2) Manually correct AP and AR Report Parameters for City, State and Zip.
3) If porting from version 6, set up the A/P 1099 year in Parameter Maintenance.
4) Check masks via Barista Administration ==> Maintenance ==> Input/Display Masks
	a. G/L ID Masks will have pound signs (#) converted to zeroes.
	b. A/P, A/R, and P/R masks will have pound signs (#) converted to capital U’s. If you want to use only numeric ID’s, you will need to change those parameters manually to zeroes.
5) Changes to the Data Dictionary.
        a. In file GLT-06, removed the 2 fields after the Description in 1$ (POSTING PER and POSTING YEAR), and changed Description to have a Y for the Separator.
6) Temporary vendors have been discontinued in this version. In order to facilitate this, all records in the system that have TEMP as the Vendor Number will be consolidated into 1 vendor. That vendor number needs to be set up by you, the dealer, in the config file by setting +DP_TEMP_VEND= and then the new vendor number. It will then be your responsibility to create that vendor after the DataPort is completed. Don't forget to set the Temporary flag to Y. If this stbl is not set up prior to running DataPort, and there is a TEMP vendor found in the data, there will be a message on the screen and in the error file to that effect, and none of those records will be ported.
7) We STRONGLY encourage you to replace blank Maintenance Codes with codes that have a value. You can do this by creating a custom public program as noted elswhere in this document. 